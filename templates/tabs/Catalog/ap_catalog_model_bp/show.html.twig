{% extends 'base.html.twig' %}

{% block title %}Catalogue
{% endblock %}


{% block javascripts %}
	{{ encore_entry_script_tags('apCatalogModelBpShow') }}
{% endblock %}


{% block body %}
	<h1 class="catalog-h1 m-2">Dossier du model de batterie: {{ ap_catalog_model_bp.name }}</h1>
	<span class="d-flex justify-content-around">
		<a class="m-2 btn" href="{{ path('ap_catalog_files_bp_new', {'id': ap_catalog_model_bp.id}) }}">Ajouter un document</a>
		<span></span>
	</span>
	<input id="hidden-data-picture-id" name="hidden-data-picture-id" type="hidden" value="">
	<div id="allCardFromCatalogModelShowBp" class='d-flex justify-content-around flex-wrap'>

		{% set loopCarroussel = 0 %}
		{% for ap_catalog_files_bp in files %}
		{% if ap_catalog_files_bp.fileType == "pdf" %}
			<div class="card card-design {{'card' ~ ap_catalog_files_bp.id }}">
		
				<span type="button" data-bs-toggle="modal" data-bs-target="#exampleModalPdf" class="d-flex justify-content-center align-items-center d-card-img-top card-pdf-vich-miniature">
					<i class="text-danger fas fa-file-pdf fa-7x"></i>
				</span>


					<div class="card-body card-body-design">
					<span class="d-flex justify-content-between">
						<span class="">
							<span class="card-title">{{ ap_catalog_files_bp.name }}</span>
							{# <a href="{{ path('ap_catalog_files_bp_show', {'id': ap_catalog_files_bp.id}) }}">show</a> #}
							<a href="{{ path('ap_catalog_files_bp_edit', {'id': ap_catalog_files_bp.id}) }}">
								<i class="fas fa-pencil-alt"></i>
							</a>
						</span>
						<!-- Button trigger delete modal -->
						<span type="button" data-bs-toggle="modal" data-bs-target="#deleteModal" class="delete-btn-files text-danger" data-file-img-id="{{ap_catalog_files_bp.id}}">
							<i class="fas fa-times"></i>
						</span>
					</span>
					<p class="card-text text-end">
						<small class="text-muted">{{ ap_catalog_files_bp.createdAt|format_datetime() }}</small>
					</p>
				</div>
			</div>
{# modal for pdf display #}
<!-- Modal for pdf display -->
<div class="modal fade" id="exampleModalPdf" tabindex="-1" aria-labelledby="exampleModalLabelPdf" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen d-flex justify-content-around"> 
        {# <h5 class="modal-title" id="exampleModalLabelPdf">Modal title</h5> #}
		
		{# <object type="application/pdf"
    data="{{'http://docs.google.com/gview?embedded=true&url=' ~ vich_uploader_asset(ap_catalog_files_bp, 'imageFile')  ~ '#toolbar=0&navpanes=0&scrollbar=0'}}"
    width="800px"
    height="2100px">
</object> #}

<iframe id="pdfviewer" src="{{'http://docs.google.com/gview?embedded=true&url=' ~ vich_uploader_asset(ap_catalog_files_bp, 'imageFile')  ~ '&amp;embedded=true'}}" frameborder="0" width="100%" height="100%"></iframe>
  		 {# <embed src="{{'http://docs.google.com/gview?embedded=true&url=' ~ vich_uploader_asset(ap_catalog_files_bp, 'imageFile')}}" width="800px" height="2100px"  type='application/pdf'/>  #}

   </div> 
</div>
	{# <embed src="{{ vich_uploader_asset(ap_catalog_files_bp, 'imageFile')}}" width="800px" height="2100px" /> #}
		{% endif %}
		{% endfor %}



		{% for ap_catalog_files_bp in files %}
			{% if ap_catalog_files_bp.fileType == "pdf" %}
			{% else %}
			<div
				class="card card-design {{'card' ~ ap_catalog_files_bp.id }}">
				<span type="button" class="btn-launch-modal" data-img-id="{{ap_catalog_files_bp.id}}" data-bs-toggle="modal" data-bs-target="#exampleModal">
					<img src="{{ vich_uploader_asset(ap_catalog_files_bp, 'imageFile') | imagine_filter('miniature') }}" class="card-img-top" alt="model image upload">
				</span>
			
				<div class="card-body card-body-design">
					<span class="d-flex justify-content-between">
						<span class="">
							<span class="card-title">{{ ap_catalog_files_bp.name }}</span>
							{# <a href="{{ path('ap_catalog_files_bp_show', {'id': ap_catalog_files_bp.id}) }}">show</a> #}
							<a href="{{ path('ap_catalog_files_bp_edit', {'id': ap_catalog_files_bp.id}) }}">
								<i class="fas fa-pencil-alt"></i>
							</a>
						</span>
						<!-- Button trigger delete modal -->
						<span type="button" data-bs-toggle="modal" data-bs-target="#deleteModal" class="delete-btn-files text-danger" data-file-img-id="{{ap_catalog_files_bp.id}}">
							<i class="fas fa-times"></i>
						</span>
					</span>
					<p class="card-text text-end">
						<small class="text-muted">{{ ap_catalog_files_bp.createdAt|format_datetime() }}</small>
					</p>
				</div>
			</div>
			{% endif %}
		{% else %}
			<span colspan="7">Pas de r√©sultats</td>
		{% endfor %}
	</div>

	{# modal delete #}
	<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="deleteModalLabel">Modal title</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<input type="hidden" id="fileIdToDelete" val="">
					Etes vous sur de vouloir supprimer ce document
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
					<button type="button" data-bs-dismiss="modal" class="delete-files-secure btn btn-primary">Supprimer</button>
				</div>
			</div>
		</div>
	</div>
	{# end modal delete #}


	{# region modal 2 #}

	<!-- Modal -->
	<div class="modal  fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
			<div class="modal-content modal-content-design">
				<div class="modal-body modal-body-design">
          {# <button type="button" class="btn-close position-absolute top-0 end-0" data-bs-dismiss="modal" aria-label="Close"></button> #}

        {#region carroussel #}

          <div id="carouselExampleDark" class="carousel carousel-dark slide" data-bs-ride="carousel"   data-bs-interval="false">
              <div class="carousel-indicators">
                {% set loopCarrousselButton = 0 %}
                {% for ap_catalog_files_bp in files %}
				{% if ap_catalog_files_bp.fileType == "pdf" %}
				{% else %}
                  <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="{{loopCarrousselButton}}" class="{{loopCarrousselButton == 0 ? 'active' : ''}}" aria-current="{{loopCarrousselButton == 0 ? 'true' : ''}}" aria-label="{{'Slide ' ~ loopCarrousselButton}}"></button>
                  {% set loopCarrousselButton = loopCarrousselButton + 1 %}
				{% endif %}
                {% endfor %}
              </div>

            <div class="carousel-inner">
              {% for ap_catalog_files_bp in files %}
                {% set loopCarroussel = loopCarroussel + 1 %}
				{% if ap_catalog_files_bp.fileType == "pdf" %}
				{% else %}

                <div id="{{'active' ~ ap_catalog_files_bp.id}}" class="carousel-item" data-img-id='{{ap_catalog_files_bp.id}}'>
                  {# <div class="modal-header modal-header-design"> #}
                    <h5 class="modal-title modal-title-picture" id="exampleModalLabel">{{ ap_catalog_files_bp.name }}</h5>
				  
                  <img src="{{ vich_uploader_asset(ap_catalog_files_bp, 'imageFile') | imagine_filter('miniature') }}" class="image-modal-design d-block w-100" alt="...">
                  {# <div class="carousel-caption d-none d-md-block">
                                        <h5>First slide label</h5>
                                        <p>Some representative placeholder content for the first slide.</p>
                                      </div> #}
				
                </div>
				{% endif %}
              {% endfor %}
              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>

              {# endregion #}
          </div>
					{# <div class="modal-footer">
										        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
										        <button type="button" class="btn btn-primary">Save changes</button>
                          </div> #}
        </div>						     
      </div>
    </div>
  </div>

		{# endregion modal #}


		{# <a href="{{ path('ap_catalog_files_bp_new') }}">Create new</a>
				
				    <a href="{{ path('ap_catalog_model_bp_index') }}">back to list</a>
				
				    <a href="{{ path('ap_catalog_model_bp_edit', {'id': ap_catalog_model_bp.id}) }}">edit</a>
				
				    {{ include('tabs/Catalog/ap_catalog_model_bp/_delete_form.html.twig') }} #}




{% endblock %}
